<!DOCTYPE html >
<html>
<head>
    <meta charset="UTF-8">
    <title>录音示例</title>
    <style>
        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
<h1>录音示例</h1>
<button id="recordButton">开始录音</button>
<button id="stopButton" disabled>停止录音</button>
<button id="playButton" disabled>播放录音</button>
</body>
<style>
    button {
        margin: 10px;
        padding: 10px 20px;
        font-size: 16px;
    }
</style>
<script>
    let recorder;
    let audio;

    const recordButton = document.getElementById('recordButton');
    const stopButton = document.getElementById('stopButton');
    const playButton = document.getElementById('playButton');

    recordButton.addEventListener('click', startRecording);
    stopButton.addEventListener('click', stopRecording);
    playButton.addEventListener('click', playRecording);

    function startRecording() {
        navigator.mediaDevices.getUserMedia({ audio: true })
            .then(stream => {
                recorder = new MediaRecorder(stream);
                audio = new Audio();
                const chunks = [];

                recorder.ondataavailable = e => {
                    chunks.push(e.data);
                };

                recorder.onstop = () => {
                    const blob = new Blob(chunks, { type: 'audio/mp3' });
                    const url = URL.createObjectURL(blob);
                    console.log(url)
                    audio.src = url;
                    playButton.disabled = false;
                    playButton.innerText = '播放录音';
                };

                recorder.start();
                recordButton.disabled = true;
                stopButton.disabled = false;
            })
            .catch(console.error);
    }

    function stopRecording() {
        recorder.stop();
        recordButton.disabled = false;
        stopButton.disabled = true;
        playButton.disabled = false;
    }

    function playRecording() {
        audio.play();
        playButton.disabled = true;
        stopButton.disabled = false;
    }
</script>
</html>
